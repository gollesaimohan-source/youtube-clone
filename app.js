const videoData = [
  {
    id: 1,
    thumbnail: "images/NEqJcYNO52c-MQ.jpg",
    duration: "12:45",
    avatar: "images/avatar.jpg",
    title: "OG film updates and more",
    channel: "thyview",
    views: "10Cr views",
    timestamp: "1 day ago",
    tags: ["Mixes", "movies", "news"]
  },
  {
    id: 2,
    thumbnail: "images/SkdSTiXJAac-MQ.jpg",
    duration: "8:23",
    avatar: "images/avatar.jpg",
    title: "best mobiles in dasara sale 2025",
    channel: "prasad tech in telugu",
    views: "10Cr views",
    timestamp: "1 day ago",
    tags: ["tech", "news"]
  },
  {
    id: 3,
    thumbnail: "images/9H_rX1vHuoM-MQ.jpg",
    duration: "15:42",
    avatar: "images/avatar.jpg",
    title: "web devlopment or DSA?",
    channel: "code with nothin",
    views: "10Cr views",
    timestamp: "1 day ago",
    tags: ["tech", "Javascript", "Html", "CSS"]
  },
  {
    id: 4,
    thumbnail: "images/kBIN2h16Rc4-MQ.jpg",
    duration: "22:18",
    avatar: "images/avatar.jpg",
    title: "whose gonna win the war",
    channel: "chess world",
    views: "10Cr views",
    timestamp: "1 day ago",
    tags: ["games", "live"]
  },
  {
    id: 5,
    thumbnail: "images/7KeHSAfQghU-MQ.jpg",
    duration: "18:36",
    avatar: "images/avatar.jpg",
    title: "the roar of the narasimha swamy",
    channel: "filmgyan",
    views: "10Cr views",
    timestamp: "1 day ago",
    tags: ["movies", "trailers", "Mixes"]
  },
  {
    id: 6,
    thumbnail: "images/NWnBxQjssvQ-MQ.jpg",
    duration: "45:12",
    avatar: "images/avatar.jpg",
    title: "html,css,javascript",
    channel: "Coding",
    views: "10Cr views",
    timestamp: "1 day ago",
    tags: ["Html", "CSS", "Javascript", "tech", "podcast"]
  },
  {
    id: 7,
    thumbnail: "images/PkE0SrqjMSI-MQ.jpg",
    duration: "1:25:30",
    avatar: "images/avatar.jpg",
    title: "tamil thalaivas VS telugu titans",
    channel: "pro kabaddi",
    views: "100k views",
    timestamp: "1 month ago",
    tags: ["sports", "live"]
  },
  {
    id: 8,
    thumbnail: "images/UWobPWzU2KI-MQ.jpg",
    duration: "20:15",
    avatar: "images/avatar.jpg",
    title: "ananthapadhamanaba swami temle mystry",
    channel: "vr facts",
    views: "1m views",
    timestamp: "1 day ago",
    tags: ["news", "Mixes"]
  },
  {
    id: 9,
    thumbnail: "images/VQRLujxTm3c-MQ.jpg",
    duration: "5:48",
    avatar: "images/avatar.jpg",
    title: "grand auto theft 5",
    channel: "Rock star games",
    views: "10Cr views",
    timestamp: "1 day ago",
    tags: ["games", "Mixes"]
  },
  {
    id: 10,
    thumbnail: "images/LJQtglllprI-MQ.jpg",
    duration: "7:32",
    avatar: "images/avatar.jpg",
    title: "8 crore ferari 812",
    channel: "Automobiles",
    views: "10Cr views",
    timestamp: "1 day ago",
    tags: ["tech", "Mixes", "news"]
  },
  {
    id: 11,
    thumbnail: "images/lKsmwq7z6mA-MQ.jpg",
    duration: "10:05",
    avatar: "images/avatar.jpg",
    title: "the upi is not free after 2025",
    channel: "finacial",
    views: "10Cr views",
    timestamp: "1 day ago",
    tags: ["news", "tech"]
  },
  {
    id: 12,
    thumbnail: "images/RV03dkFdhlo-MQ.jpg",
    duration: "25:40",
    avatar: "images/avatar.jpg",
    title: "24 hours in snake island",
    channel: "adventures",
    views: "10Cr views",
    timestamp: "1 day ago",
    tags: ["nature", "Mixes"]
  },
  {
    id: 13,
    thumbnail: "images/u0cPWB-HVVo-MQ.jpg",
    duration: "3:22",
    avatar: "images/avatar.jpg",
    title: "bumble bee VS optimus prime",
    channel: "paramount studios",
    views: "10Cr views",
    timestamp: "1 day ago",
    tags: ["movies", "trailers"]
  },
  {
    id: 14,
    thumbnail: "images/y1-w1kUGuz8-MQ.jpg",
    duration: "2:15",
    avatar: "images/avatar.jpg",
    title: "kalki 2898 ad trailer ",
    channel: "vyjayanthi movies",
    views: "10Cr views",
    timestamp: "1 day ago",
    tags: ["movies", "trailers", "news"]
  },
  {
    id: 15,
    thumbnail: "images/ZcOobuEvmLM-MQ.jpg",
    duration: "12:30",
    avatar: "images/avatar.jpg",
    title: "sniping from the peaks",
    channel: "unq gamer",
    views: "10Cr views",
    timestamp: "1 day ago",
    tags: ["games", "live"]
  },
  {
    id: 16,
    thumbnail: "images/Hk7tzYMyqFg-MQ.jpg",
    duration: "15:20",
    avatar: "images/avatar.jpg",
    title: "mutton kabab in village style",
    channel: "village cooking",
    views: "10Cr views",
    timestamp: "1 day ago",
    tags: ["nature", "Mixes"]
  },
  {
    id: 17,
    thumbnail: "images/gzUu-FJ7s-Y-MQ.jpg",
    duration: "4:50",
    avatar: "images/avatar.jpg",
    title: "ramayana glimpse",
    channel: "cinema",
    views: "10Cr views",
    timestamp: "1 day ago",
    tags: ["movies", "Mixes", "music"]
  },
  {
    id: 18,
    thumbnail: "images/HTvJl71zmf4-MQ.jpg",
    duration: "5:00",
    avatar: "images/avatar.jpg",
    title: "interstellar 5 min video",
    channel: "hollywood",
    views: "10Cr views",
    timestamp: "1 day ago",
    tags: ["movies", "Mixes"]
  },
  {
    id: 19,
    thumbnail: "images/2yhvCgpNJiA-MQ.jpg",
    duration: "3:45",
    avatar: "images/avatar.jpg",
    title: "mahavatar narasimha",
    channel: "hombale films",
    views: "10Cr views",
    timestamp: "1 day ago",
    tags: ["movies", "trailers"]
  }
];

const cardContainer = document.querySelector('.card-container');
const searchInput = document.querySelector('.search input');
const searchBtn = document.querySelector('.search button');
const tagsContainer = document.querySelector('.tags');
const tags = document.querySelectorAll('.tag');
const barsBtn = document.querySelector('.bars');
const sidebar = document.querySelector('aside');
const themeToggleBtn = document.querySelector('.theme-toggle');

// 1. Dynamic Rendering
function renderVideos(data) {
  cardContainer.innerHTML = '';

  if (data.length === 0) {
    cardContainer.innerHTML = '<h2>No videos found matching your criteria.</h2>';
    return;
  }

  data.forEach(video => {
    // Extract YouTube video ID from the thumbnail string (e.g., "images/ID-MQ.jpg")
    const videoId = video.thumbnail.split('/')[1].replace('-MQ.jpg', '');
    const videoUrl = video.url || `https://www.youtube.com/watch?v=${videoId}`;

    const cardHTML = `
      <div class="card">
        <div class="thumbnail-container">
          <a href="${videoUrl}" target="_blank" rel="noopener noreferrer">
            <img src="${video.thumbnail}" alt="thumbnail" />
          </a>
          <span class="video-duration">${video.duration}</span>
        </div>
        <div class="avatar-content">
          <div class="avatar">
            <img class="avt" src="${video.avatar}" alt="avatar" />
          </div>
          <div class="content">
            <a href="${videoUrl}" target="_blank" rel="noopener noreferrer">
              <h3>${video.title}</h3>
            </a>
            <p class="channel-name">${video.channel}</p>
            <div class="content-status">
              <p>${video.views}</p>
              <p>${video.timestamp}</p>
            </div>
          </div>
          <div class="dots">
            <img src="icons/dots.svg" alt="dots" />
          </div>
        </div>
      </div>
    `;
    cardContainer.insertAdjacentHTML('beforeend', cardHTML);
  });
}

// Initial render
renderVideos(videoData);

// 2. Search filtering
function handleSearch(query) {
  const lowercaseQuery = query.toLowerCase();
  const filteredData = videoData.filter(video =>
    video.title.toLowerCase().includes(lowercaseQuery) ||
    video.channel.toLowerCase().includes(lowercaseQuery)
  );
  renderVideos(filteredData);

  // reset tags
  document.querySelectorAll('.tag').forEach(t => {
    t.classList.remove('dark');
    t.classList.add('light');
  });
  document.querySelector('.tag:first-child').classList.remove('light');
  document.querySelector('.tag:first-child').classList.add('dark');
}

searchInput.addEventListener('input', (e) => {
  handleSearch(e.target.value);
});
searchBtn.addEventListener('click', () => {
  handleSearch(searchInput.value);
});


// 3. Tag filtering
tagsContainer.addEventListener('click', (e) => {
  if (e.target.classList.contains('tag')) {
    // Update Active Style
    document.querySelectorAll('.tag').forEach(t => {
      t.classList.remove('dark');
      t.classList.add('light');
    });
    e.target.classList.remove('light');
    e.target.classList.add('dark');

    const clickedTag = e.target.textContent;

    if (clickedTag === 'All') {
      renderVideos(videoData);
    } else {
      const filteredData = videoData.filter(video =>
        video.tags && video.tags.includes(clickedTag)
      );
      renderVideos(filteredData);
    }

    // reset search
    searchInput.value = '';
  }
});


// 4. Sidebar Toggle
barsBtn.addEventListener('click', () => {
  sidebar.classList.toggle('collapsed');
  document.querySelector('.main-container').classList.toggle('expanded');
});

// 5. Dark Mode Toggle
if (themeToggleBtn) {
  themeToggleBtn.addEventListener('click', () => {
    document.body.classList.toggle('dark-theme');
  });
}
